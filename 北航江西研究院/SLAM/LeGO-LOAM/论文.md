# LeGO-LOAM: Lightweight and Ground-Optimized Lidar Odometry and Mapping on Variable Terrain

## 摘要

我们提出了一种用于地面车辆的实时6自由度姿态估计的轻型，经地面优化的激光雷达里程表和测绘方法LeGO-LOAM。  LeGO-LOAM重量轻，因为它可以在低功耗嵌入式系统上实现实时姿态估计。  LeGO LOAM经过地面优化，因为它在分割和优化步骤中充分利用了地面的存在。 我们首先应用点云分割来滤除噪声，然后进行特征提取以获得独特的平面和边缘特征。
然后，两步Levenberg-Marquardt优化方法使用平面和边缘特征来解决连续扫描中六自由度变换的不同分量。 我们使用从地面车辆的可变地形环境中收集的数据集，将LeGO-LOAM的性能与最先进的方法LOAM进行了比较，并表明LeGO-LOAM以降低的计算成本实现了相似或更高的准确性 。 我们还将LeGO-LOAM集成到SLAM框架中，以消除由漂移引起的姿势估计误差，该误差使用KITTI数据集进行了测试。

---

## 引言

在智能机器人的能力中，地图构建和状态估计是最基本的先决条件之一。

大量努力致力于基于视觉和雷达的六自由度同步定位与建图的方法。

虽然基于视觉的方法在回环闭合检测中具有优势，但其对光照和视点变化的敏感度可能使其作为唯一的导航传感器不可靠。

另一方面，基于激光雷达的方法即使在夜间也能正常工作，许多三维激光雷达的高分辨率允许在大孔径、远距离捕捉环境的细节。

因此，本文重点研究利用三维激光雷达来支持实时状态估计和映射。

寻找两个激光雷达扫描之间的转换的典型方法是迭代最近点（ICP）[1]。通过在逐点水平上找到对应点，ICP迭代地对齐两组点，直到满足停止条件。当扫描包含大量点时，ICP的计算成本会很高。为了提高ICP的效率和准确性，人们提出了许多ICP变体[2]。[3] 引入一个点对面ICP变量，它将点与局部平面面片相匹配。广义ICP[4]提出了一种匹配两次扫描的局部平面片的方法。此外，一些ICP变体利用并行计算提高了效率[5]–[8]。

基于特征的匹配方法由于从环境中提取具有代表性的特征而需要较少的计算资源，因而受到越来越多的关注。这些特征应该适合于有效匹配和视角不变。许多检测器，如点特征直方图（PFH）[9]和视点特征直方图（VFH）[10]，已经被提出用简单有效的技术从点云中提取这些特征。文献[11]介绍了一种利用Kanade-Tomasi角点检测器从点云中提取通用特征的方法。在[12]中讨论了从密集点云中提取线和平面特征的框架。

许多利用特征进行点云配准的算法也被提出。[13] [14]提出了一种在局部聚类中进行点曲率计算的关键点选择算法。然后使用选定的关键点执行匹配和位置识别。通过将点云投影到距离图像上并分析深度值的二阶导数，[15]从曲率较高的点中选择特征进行匹配和位置识别。假设环境是由平面组成的，文[16]提出了一种基于平面的配准算法。室外环境，如森林，可能会限制这种方法的应用。文献[17]提出了一种专门为Velodyne激光雷达设计的锁环线段法。CLS使用扫描的两个连续“环”中的点随机生成线。因此，生成两行云并用于注册。然而，这种方法面临着随机生成直线所带来的挑战。文献[18]提出了一种基于分割的配准算法。SegMatch首先对点云应用分段。然后根据每个线段的特征值和形状直方图计算特征向量。随机林用于匹配两次扫描的片段。虽然该方法可用于在线姿态估计，但只能在1Hz左右提供定位更新。

文献[19]和[20]提出了一种低漂移、实时的激光雷达里程测量与建图（LOAM）方法。LOAM执行点特征到边缘/平面扫描匹配，以找到扫描之间的对应关系。通过计算点在其局部区域的粗糙度来提取特征。
选取粗糙度值较高的点作为边缘特征。同样，具有低粗糙度值的点被指定为平面特征。实时性能通过将估计问题新颖地划分为两个独立的算法来实现。一种算法在高频下运行，在低精度下估计传感器速度。另一种算法在低频下运行，但返回高精度的运动估计。这两个估计被融合在一起产生一个单一的运动估计在高频和高精度。在基蒂里程测量基准站点上，LOAM的最终精度是通过仅使用激光雷达的估计方法获得的最佳结果[21]。

在这项工作中，我们追求可靠的，实时的六自由度姿态估计装备三维激光雷达地面车辆，以一种易于在小型嵌入式系统上有效实现的方式。这样的任务是非常重要的，有几个原因。许多无人地面车辆（UGV）由于其尺寸有限，没有悬挂装置或强大的计算单元。小型无人地面车辆在多变地形上行驶时，经常会遇到非平稳运动，导致采集到的数据常常失真。由于重叠有限的大运动，在两次连续扫描之间也很难找到可靠的特征对应。此外，从三维激光雷达接收到的大量点对使用有限的机载计算资源进行实时处理提出了挑战。

当我们对这类任务实施LOAM时，当UGV在平滑运动和稳定特征下运行时，在足够的计算资源支持下，可以获得低漂移运动估计。然而，当资源有限时，LOAM的性能会恶化。由于需要计算密集的三维点云中每个点的粗糙度，因此在轻量级嵌入式系统中，特征提取的更新频率并不总是与传感器的更新频率保持一致。UGV在嘈杂环境中的运行也对LOAM提出了挑战。在小型无人地面车辆上，由于激光雷达的安装位置通常靠近地面，因此来自地面的传感器噪声可能会持续存在。例如，从草地返回的范围可能会导致较高的粗糙度值。因此，可以从这些点提取不可靠的边缘特征。类似地，也可以从从树叶返回的点提取边缘或平面特征。这样的特征对于扫描匹配通常是不可靠的，因为在两次连续的扫描中可能看不到相同的草叶或叶子。使用这些特性可能会导致不准确的注册和较大的漂移。

因此，我们提出一种轻量化的地面优化LOAM（LeGO-LOAM），用于复杂地形环境下无人地面车辆的位姿估计。

LeGO-LOAM是轻量级的，因为实时姿态估计和映射可以在嵌入式系统上实现。

点云分割是为了剔除地面分离后可能代表不可靠特征的点。

LeGO-LOAM也是地面优化，因为我们介绍了一个两步优化的姿势估计。在第一步中，使用从地面提取的平面特征来获得[tz，θroll，θpitch]。在第二步中，通过匹配从分割的点云中提取的边缘特征来获得其余的变换[tx，tyy，θyaw]。我们还集成了执行循环闭包的能力，以纠正运动估计漂移。
论文的其余部分安排如下。第二节介绍了实验所用的硬件。第三节详细介绍了所提出的方法。第四节介绍了一组在各种室外环境下进行的实验。

---

## 系统硬件

文中提出的框架通过Velodyne VLP-16和HDL-64E三维激光雷达数据集进行了验证。VLP-16测量范围可达100m，精度为±3cm。它的垂直视场（FOV）为30°。16通道传感器提供2°的垂直角分辨率。根据旋转速率，水平角分辨率在0.1°到0.4°之间变化。在整个论文中，我们选择了10Hz的扫描速率，它提供了0.2°的水平角分辨率。HDL-64E（本研究通过KITTI数据集进行探索）的水平视场也为360°，但多了48个通道。HDL-64E的垂直视野为26.9°

本文使用的UGV是Clearpath Jackal。它由270瓦时的锂电池供电，最大速度为2.0米/秒，最大有效载荷为20公斤。Clearpath Jackal还配备了一个低成本的惯性测量单元（IMU），即CH Robotics UM6 方位传感器。
提出的框架在两台计算机上进行了验证：一台Nvidia Jetson TX2和一台带有2.5GHz i7 4710MQ CPU的笔记本电脑。Jetson TX2是一款嵌入式计算设备，配备ARM Cortex-A57 CPU。笔记本电脑CPU的选择与[19]和[20]中使用的计算硬件相匹配。本文所示的实验仅使用这些系统的cpu。

---

## 轻量雷达里程与建图

### 系统概述

图1显示了提出的框架的概述。系统接收来自三维激光雷达的输入并输出6自由度姿态估计。整个系统分为五个模块。

第一种方法是分割，将单次扫描的点云投影到range图像上进行分割。

分割后的点云被发送到特征提取模块。

然后，激光雷达里程计使用从上一模块提取的特征来找到与连续扫描相关的变换。

这些特征在lidar映射中进一步处理，后者将它们注册到全局点云地图中。

最后，变换积分模块融合了激光测距和激光雷达测图的姿态估计结果，输出最终的姿态估计值。

相对于[19]和[20]的原始广义LOAM框架，提出的系统寻求提高地面车辆的效率和精度。下面介绍这些模块的详细信息。

### 分割

### 特征提取

### 雷达里程计

### 雷达建图

---

## 实验

我们现在描述了一系列的实验来定性和定量地分析两种相互竞争的方法，LOAM和LeGO-LOAM，在两种硬件配置上，分别是搭载Cortex-A57的Jetson TX2和i7-4710MQ的笔记本电脑。
这两种算法都是在C++中实现的，并在Ubuntu Linux 1中使用机器人操作系统（ROS）[25 ]执行。


### A 小型无人地面车辆试验

我们在覆盖着植被的室外环境中手动驾驶机器人。我们首先展示了在这种环境下特征提取的定性比较。使用这两种方法从同一扫描中提取的边缘和平面特征如图4所示。这些特征对应于第三节中发送到激光雷达映射模块的{fte，F tp}。如图4（d）所示，在点云分割之后，来自LeGO-LOAM的特征的数量大大减少。从树叶返回的大多数点都被丢弃，因为它们在多个扫描中不是稳定的特征。另一方面，由于从grass返回的点也是非常嘈杂的，因此在评估后会得到较大的粗糙度值。因此，利用原始LOAM不可避免地从这些点提取边缘特征。如图4（c）所示，从地面提取的边缘特征通常是不可靠的。
虽然我们可以改变提取LOAM边缘和平面特征的粗糙度阈值，以减少特征的数量，并从草和树叶中过滤出不稳定的特征，但在应用这些变化后，我们会遇到更糟糕的结果。例如，我们可以增加c-th以从环境中提取更稳定的边缘特征，但是如果机器人进入一个相对干净的环境，这种变化可能导致有用的边缘特征数量不足。同样，当机器人从一个干净的环境移动到一个嘈杂的环境时，减小c-th也会导致缺少有用的平面特征。在这里的所有实验中，我们对LOAM和LeGO-LOAM都使用相同的c th。

现在我们比较两种方法在测试环境中的映射结果。为了模拟具有挑战性的潜在无人地面车辆作战场景，我们进行了一系列激进的偏航机动。请注意，在本文的所有实验中，这两种方法都是从IMU获得的相同的初始平移和旋转猜测。操作60秒后得到的点云图如图5所示。由于不稳定特征导致的错误特征关联，LOAM地图在操作过程中会出现两次偏离。图5（a）中用白色箭头突出显示的三条树干实际上是同一棵树。视频附件2中提供了两种里程计方法的完整映射过程的可视化。

### B 大型无人地面车辆试验

接下来，在三个大型数据集上对壤土和LeGO-LOAM进行定量比较，这些数据集将被称为实验1、2和3。前两张照片是在史蒂文斯理工学院的校园里收集的，那里有许多建筑物、树木、道路和人行道。这些实验及其环境如图6（a）所示。
实验3横跨一条森林覆盖的徒步小道，以树木、柏油路和草地和土壤覆盖的小径为特色。
执行实验3的环境如图8所示。表一列出了每个实验的详细信息。为了进行公平比较，每个实验显示的所有性能和精度结果在每个数据集的10次实时回放试验中取平均值。

1） 实验1：第一个实验表明，壤土和LeGO-LOAM都能在平滑运动的城市环境中实现低漂移姿态估计。我们避免了激进的偏航机动，我们避免了驾驶机器人通过稀疏的区域，只有少数稳定的特征可以获得。在整个数据记录过程中，机器人在平坦的道路上进行操作。机器人的初始位置在斜坡上，如图6（b）所示。机器人以1.35m/s的平均速度行驶807秒后返回相同位置。
为了评估两种方法的位姿估计精度，我们比较了最终姿态和初始姿态之间的平移和旋转差异。在这里，初始姿态被定义为[0，0，0，0，0]，通过所有实验。如表五所示，LOAM和LeGO-LOAM在两种不同的硬件配置上实现了类似的低漂移姿态估计。LeGO-LOAM的最终地图，当运行在Jetson上时，如图6（b）所示。

2） 实验2：虽然实验2是在与实验1相同的环境中进行的，但它的轨迹略有不同，它在人行道上行驶，如图7（a）所示。这条人行道代表了一个壤土可能经常失败的环境。一堵墙和一根柱子位于人行道的一端，从这些结构中提取的边缘和平面特征是稳定的。人行道的另一端是一个开阔的区域，上面覆盖着嘈杂的物体，如草地和树木，这将导致特征提取的不可靠。因此，壤土的姿态估计在驶过这条人行道后发生变化（图7（b）和（d））。LeGOLOAM没有这样的问题：1）没有从被草覆盖的地面提取边缘特征，2）分割后从树叶中过滤出噪声传感器读数。两种方法的精度比较如表五所示。在本实验中，LeGO-LOAM的精度比壤土高出一个数量级。

3） 实验三：实验三的数据集来自一条森林覆盖的徒步小道，无人地面车辆以1.3m/s的平均速度行驶，35分钟后机器人返回初始位置。在这种环境下，海拔变化约为19米。UGV在三种路面上行驶：泥泞的小路、沥青路面和草地覆盖的地面。在图8的底部分别示出了这种表面的代表性图像。道路至少一侧始终有树木或灌木丛。
我们首先在这种环境下测试壤土的准确性。
在两台使用的计算机上，生成的地图在不同的位置出现分歧。与无人地面车辆初始位置有关的最终平移和旋转误差在Jetson上为69.40m和27.38°，在笔记本电脑上为62.11m和8.50°。
图9（a）和（b）中示出了两种硬件配置上10次试验的结果轨迹。
将LeGO-LOAM应用于该数据集时，Jetson的最终相对平移和旋转误差分别为13.93m和7.73°，笔记本电脑上的最终相对平移和旋转误差分别为14.87m和7.96°。
图8所示为杰森河畔LeGO-LOAM的最终点云地图，覆盖在卫星图像上。图8中心放大的局部地图显示，LeGO-LOAM的点云地图与露天可见的三棵树匹配良好。在两台计算机上，从LeGO-LOAM获得的所有路径之间显示出高度一致性。
图9（c）和（d）显示了在每台计算机上运行的10次试验。

---